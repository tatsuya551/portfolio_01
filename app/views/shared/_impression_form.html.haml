= form_with(model: [@book,@impression], local: true) do |f|
  .impression-detail
    .impression-detail__top.form-content
      読書期間
    .impression-detail__read-day
      = f.select :read_day, options_for_select(Impression.read_days.keys.map {|k| [I18n.t("enums.impression.read_day.#{k}"), k]}, selected: @impression.read_day), {}, {class: 'select-box'}
    .error-text
      - @impression.errors.full_messages_for(:read_day).each do |message|
        %div
          = message
    .impression-detail__top.form-content
      総評価
    .impression-detail__rating
      = f.select :rating, options_for_select(Impression.ratings.keys.map {|k| [I18n.t("enums.impression.rating.#{k}"), k]}, selected: @impression.rating), {}, {class: 'select-box'}
    .error-text
      - @impression.errors.full_messages_for(:rating).each do |message|
        %div
          = message
    .impression-detail__top.form-content
      また読みたい時
    .impression-detail__reread_timing
      = f.select :reread_timing, options_for_select(Impression.reread_timings.keys.map {|k| [I18n.t("enums.impression.reread_timing.#{k}"), k]}, selected: @impression.reread_timing), {}, {class: 'select-box'}
    .error-text
      - @impression.errors.full_messages_for(:reread_timing).each do |message|
        %div
          = message
  .impression-graph
    .impression-graph__box
      .impression-graph__box__top.form-content
        面白さ
      .impression-graph__box__interest
        = f.select :interest, options_for_select(Impression.interests.keys.map {|k| [I18n.t("enums.impression.interest.#{k}"), k]}, selected: @impression.interest), {}, {class: 'select-box'}
      .error-mini-text
        - @impression.errors.full_messages_for(:interest).each do |message|
          %div
            = message
    .impression-graph__box
      .impression-graph__box__top.form-content
        感動
      .impression-graph__box__impressed
        = f.select :impressed, options_for_select(Impression.impresseds.keys.map {|k| [I18n.t("enums.impression.impressed.#{k}"), k]}, selected: @impression.impressed), {}, {class: 'select-box'}
      .error-mini-text
        - @impression.errors.full_messages_for(:impressed).each do |message|
          %div
            = message
    .impression-graph__box
      .impression-graph__box__top.form-content
        気付き
      .impression-graph__box__awareness
        = f.select :awareness, options_for_select(Impression.awarenesses.keys.map {|k| [I18n.t("enums.impression.awareness.#{k}"), k]}, selected: @impression.awareness), {}, {class: 'select-box'}
      .error-mini-text
        - @impression.errors.full_messages_for(:awareness).each do |message|
          %div
            = message
  .impression-graph
    .impression-graph__box
      .impression-graph__box__top.form-content
        衝撃度
      .impression-graph__box__impact
        = f.select :impact, options_for_select(Impression.impacts.keys.map {|k| [I18n.t("enums.impression.impact.#{k}"), k]}, selected: @impression.impact), {}, {class: 'select-box'}
      .error-mini-text
        - @impression.errors.full_messages_for(:impact).each do |message|
          %div
            = message
    .impression-graph__box
      .impression-graph__box__top.form-content
        実践度
      .impression-graph__box__practice
        = f.select :practice, options_for_select(Impression.practices.keys.map {|k| [I18n.t("enums.impression.practice.#{k}"), k]}, selected: @impression.practice), {}, {class: 'select-box'}
      .error-mini-text
        - @impression.errors.full_messages_for(:practice).each do |message|
          %div
            = message
    .impression-graph__box
      .impression-graph__box__top.form-content
        知識の深さ
      .impression-graph__box__knowledge
        = f.select :knowledge, options_for_select(Impression.knowledges.keys.map {|k| [I18n.t("enums.impression.knowledge.#{k}"), k]}, selected: @impression.knowledge), {}, {class: 'select-box'}
      .error-mini-text
        - @impression.errors.full_messages_for(:knowledge).each do |message|
          %div
            = message
  .impression-note
    .impression-note__top.form-content
      メモ
    .impression-note__note
      = f.text_area :note, placeholder: "感想メモを残してみましょう", class: "note-box note-area"
    .error-text
      - @impression.errors.full_messages_for(:note).each do |message|
        %div
          = message
  - if params[:controller] == "impressions" && params[:action] == "new" || params[:controller] == "impressions" && params[:action] == "create"
    .btn-box
      .btn-box__book-new
        = f.submit " 感想を登録する ", class: "submit-btn text-line-none"
      .btn-box__back
        = link_to :back, class: "gray-btn margin-left-40 text-line-none" do
          もどる
  - else
    .btn-box
      .btn-box__book-new
        = f.submit " 編集する ", class: "submit-btn text-line-none"
      .btn-box__back
        = link_to :back, class: "gray-btn margin-left-40 text-line-none" do
          もどる
